apiVersion: v1
kind: Namespace
metadata:
  name: crypto-pqc
  labels:
    app.kubernetes.io/name: crypto-pqc
    app.kubernetes.io/part-of: pqc-digital-signature

---
# PostgreSQL ConfigMap
apiVersion: v1
kind: ConfigMap
metadata:
  name: postgres-config
  namespace: crypto-pqc
data:
  init.sql: |
    -- Initialize databases for microservices
    CREATE DATABASE identity_db;
    CREATE DATABASE ca_db;
    CREATE DATABASE ra_db;
    CREATE DATABASE validation_db;
    CREATE DATABASE crypto_doc;
    CREATE DATABASE crypto_org;
    CREATE DATABASE crypto_cloud_sign;

    -- Create user with appropriate permissions
    GRANT ALL PRIVILEGES ON DATABASE identity_db TO admin;
    GRANT ALL PRIVILEGES ON DATABASE ca_db TO admin;
    GRANT ALL PRIVILEGES ON DATABASE ra_db TO admin;
    GRANT ALL PRIVILEGES ON DATABASE validation_db TO admin;
    GRANT ALL PRIVILEGES ON DATABASE crypto_doc TO admin;
    GRANT ALL PRIVILEGES ON DATABASE crypto_org TO admin;
    GRANT ALL PRIVILEGES ON DATABASE crypto_cloud_sign TO admin;
